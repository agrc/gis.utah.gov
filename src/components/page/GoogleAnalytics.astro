---
type Props = {
  id: string;
};

const { id } = Astro.props;
---

<script is:inline>
  partytown = {
    forward: [
      'dataLayer.push',
      'analytics.track',
      'analytics.identify',
      'analytics.group',
      'analytics.reset',
      'analytics.user',
      'analytics.alias',
    ],
  };
</script>
<script type="text/partytown" is:inline async src={`https://www.googletagmanager.com/gtag/js?id=${id}`}></script>
<script type="text/partytown" is:inline define:vars={{ id }}>
  window.dataLayer = window.dataLayer || [];

  const gtag = () => window.dataLayer.push(arguments);
  gtag('js', new Date());
  gtag('config', id);
</script>
