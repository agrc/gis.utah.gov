---
import Layout from '@layouts/DataPage.astro';

import type { IMetadata, IPageMetadata } from '@models/products/sgid/types';
import { ProductType, SgidCategory } from '@models/products/sgid/types';

import HubDownloads from '@components/data/HubDownloads.astro';
import Metadata from '@components/data/Metadata.astro';
import UpdateHistory from '@components/data/UpdateHistory.astro';

import BulletedList from '@components/page/BulletedList.astro';
import CardWithPopularLink from '@components/page/CardWithPopularLink.astro';
import CardWithSmallLink from '@components/page/CardWithSmallLink.astro';
import Contacts from '@components/page/Contacts.astro';
import DefinitionListItem from '@components/page/DefinitionListItem.astro';
import ExternalLink from '@components/page/ExternalLink.astro';
import GridForMoreResources from '@components/page/GridForMoreResources.astro';
import GridForYouMightLike from '@components/page/GridForYouMightLike.astro';
import Section from '@components/page/Section.astro';

import { dataPages } from '@data/downloadMetadata';

export const metadata: IMetadata = {
  title: 'Utah Schools PreK to 12',
  description: 'Point locations of preschool and K-12 schools in Utah.',
  stewards: ['UGRC'],
  type: ProductType.POINT,
  category: SgidCategory.SOCIETY,
};

const page: IPageMetadata = {
  ...metadata,
  updateHistory: ['June 2023 - Updated Granger High location', 'August 2020'],
  hub: {
    ...dataPages[metadata.title],
  },
};
---

<Layout pageTitle={page.title} subTitle={page.updateHistory[0]} category={page.category} actionUrl={page.application}>
  <Metadata slot="metadata" {...page} />

  <Fragment slot="summary">
    <p>
      This dataset contains point locations for preschool and K-12 schools in the state of Utah - updated for the
      2019-2020 school year. Higher education and adult vocational training are not included in the dataset.
    </p>
  </Fragment>

  <Section title="Use the data" slot="downloads" titlePosition="center">
    <HubDownloads {...page.hub} />
  </Section>

  <Fragment slot="description">
    <p>
      This dataset was built in collaboration with <ExternalLink href="https://wfrc.org/"
        >Wasatch Front Regional Council</ExternalLink
      > (WFRC), the <ExternalLink href="https://schools.utah.gov/">Utah State Board of Education</ExternalLink> (USBE), and
      the <a href="/">Utah Geospatial Resource Center</a> (UGRC). The dataset includes public and private K-12 school locations
      with enrollment and demographics info by grade for public schools (charter and traditional) reported to the USBE. While
      some preschools are included, this is not a comprehensive statewide dataset for preschools.
    </p>
    <p>
      Schools marked as 'closed' have not been included in this data. More information regarding schools in Utah can be
      found on the <ExternalLink href="https://schools.utah.gov/">Utah State Board of Education website</ExternalLink>.
    </p>
    <p>
      This dataset will be updated annually in conjunction with USBE's <ExternalLink
        href="https://schools.utah.gov/data/reports">annual report</ExternalLink
      > cycle.
    </p>
    <h3>Methodology</h3>
    <h4>Tabular Data</h4>
    <p>
      The tabular portion of the data was downloaded from USBE's data page. The list of fields and the data in this
      dataset were generated by joining the following USBE reports:
    </p>
    <BulletedList>
      <li>
        <ExternalLink href="https://schools.utah.gov/data/reports?mid=1424&tid=6">2019-2020 School List</ExternalLink>
      </li>
      <li>
        <ExternalLink href="https://schools.utah.gov/data/reports?mid=1424&tid=4"
          >Fall 2019-2020 Enrollment by Demographics and Grade Levels</ExternalLink
        >
      </li>
    </BulletedList>
    <h4>Geographic Data</h4>
    <p>
      Point locations (geometry) were generated from USBE's school list using the <ExternalLink
        href="http://api.mapserv.utah.gov/#geocoding">UGRC Geocoding Web API</ExternalLink
      > which utilizes address point and street centerline reference data. These were then compared to the previous 2016-2017
      school layer's locations with the best position chosen. Unmatched addresses were hand placed with assistance from publicly
      available, commercial mapping and search web apps.
    </p>
    <h3>Fields Worth Noting</h3>
    <dl>
      <DefinitionListItem title="SchoolType">
        <BulletedList>
          <li>Residential Treatment</li>
          <li>Adult High</li>
          <li>Vocational</li>
          <li>Special Education</li>
          <li>Regular Education</li>
          <li>YIC - <ExternalLink href="https://www.schools.utah.gov/yic">Youth-In-Custody</ExternalLink></li>
          <li>Alternative</li>
        </BulletedList>
      </DefinitionListItem>

      <DefinitionListItem title="SchoolLevel">
        <BulletedList>
          <li>MID - Junior / Middle School</li>
          <li>HIGH - High School</li>
          <li>K12 - Kindergarten through 12th Grade</li>
          <li>PREK - Pre Kindergarten</li>
          <li>ELEM - Elementary School</li>
        </BulletedList>
      </DefinitionListItem>
    </dl>

    <h3>Acronyms and Abbreviations in the Data</h3>
    <p>LEA: Local Educational Agency (i.e., school district)</p>
    <BulletedList>
      <li>LEAName</li>
      <li>LEANumber</li>
      <li>LEAID</li>
    </BulletedList>

    <p>NESS: Necessarily Existent Small Schools funding</p>

    <Contacts contactKey="ugrc" />
  </Fragment>

  <UpdateHistory slot="update-history" updates={page.updateHistory} style="secondary" />

  <Section title="More resources" slot="more-resources" titlePosition="center">
    <GridForMoreResources>
      <CardWithPopularLink title="USBE" href="https://schools.utah.gov"
        >Utah State Board of Education homepage.</CardWithPopularLink
      >
      <CardWithPopularLink
        title="School district boundaries"
        href="/products/sgid/political/state-school-board-districts"
        >State school board districts for 2022 to 2032.</CardWithPopularLink
      >
    </GridForMoreResources>
  </Section>

  <Section title="You might also like" slot="you-might-also-like" stripe titlePosition="center">
    <GridForYouMightLike>
      <CardWithSmallLink title="Schools" href="/products/sgid/society/higher-education" style="secondary"
        >Utah higher education institution locations from the SGID.</CardWithSmallLink
      >
      <CardWithSmallLink title="Society" href="/products/sgid/society" style="secondary"
        >The SGID society category index page.</CardWithSmallLink
      >
    </GridForYouMightLike>
  </Section>
</Layout>
